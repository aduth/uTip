// uTip | Andrew Duthie | MIT License
(function(){var n=[].slice;var h=window.jQuery||window.Zepto,l=window,k=window.document,m,f;f={extend:(null!=h?h.extend:void 0)||function(){var a,b,c,d,e,g,i;d=arguments[0];c=2<=arguments.length?n.call(arguments,1):[];g=0;for(i=c.length;g<i;g++)for(a in b=c[g],b)e=b[a],d[a]=e;return d},on:function(a,b,c){if(a.addEventListener)return a.addEventListener(b,c,!1);if(a.attachEvent)return a.attachEvent("on"+b,c)},perceivedBrightness:function(a){var b,c,d,e,g;c=0;g=this.hexBits(a);b=a=0;for(e=g.length;a<
e;b=++a)d=g[b],d=parseInt(d,16),c+=function(){switch(b){case 0:return 299*d;case 1:return 587*d;default:return 114*d}}();return c/255E3},brightenColor:function(a,b){var c,d,e,g,i;g=this.hexBits(a);i=[];d=0;for(e=g.length;d<e;d++)c=g[d],c=parseInt(c,16)+Math.floor(255*b),i.push(f.rgbValToHexVal(c));return"#"+i.join("")},mixColor:function(a,b,c){var d,e,b=this.hexBits(b),g,i,h;i=this.hexBits(a);h=[];e=a=0;for(g=i.length;a<g;e=++a)d=i[e],d=Math.floor((parseInt(d,16)+Math.floor(parseInt(b[e],16)*c))/
2),h.push(f.rgbValToHexVal(d));return"#"+h.join("")},rgbValToHexVal:function(a){return 255<a?"ff":0>a?"00":("0"+a.toString(16)).slice(-2)},hexBits:function(a){a=f.extendHex(a.replace("#",""));return a.match(/([a-f0-9]){2}/gi)},extendHex:function(a){if(3===a.length){var b,c,d,e;d=a.split("");e=[];b=0;for(c=d.length;b<c;b++)a=d[b],e.push(""+a+a);a=e.join("")}return a},prependStyle:function(a){var b,c;b=k.getElementsByTagName("head")[0];c=k.createElement("style");c.type="text/css";c.styleSheet?c.styleSheet.cssText=
a:c.appendChild(k.createTextNode(a));return b.insertBefore(c,b.firstChild)}};m={backgroundColor:"#eee",borderBrighten:-0.2,gradientBrighten:0.05,textColor:void 0,textShadow:!0,darkThreshold:0.5,maxWidth:"300px",padding:"8px",transitionTime:"0.2s",transitionDelay:"0s",text:function(){return""}};var j=function(a,b){var c;this.options=b;this.elements=null!=a.nodeType&&1===a.nodeType?[a]:NodeList&&a instanceof NodeList?[].slice.call(a):h&&a instanceof h?a.toArray():a instanceof Array?a:[];this.settings=
f.extend({},m,b);"string"===typeof this.options.text&&(c=this.options.text,this.settings.text=function(){return c});this.constructor.init||(f.prependStyle(".uTip{\nposition:absolute;\nvisibility:hidden;\nopacity:0;\nz-index:1000;\nborder-radius:4px;\nbox-shadow:0 1px 3px rgba(0,0,0,0.15),inset 1px 1px 0 rgba(255,255,255,0.5)\n}\n.uTip:before,\n.uTip:after{\ncontent:'';\nposition:absolute;\nz-index:1000;\nbottom:-7px;\nleft:50%;\nmargin-left:-8px;\nborder:8px solid transparent;\nborder-bottom:0\n}\n.uTip:before{\nbottom:-8px\n}"),
this.constructor.init=!0);this.createTip();this.bindEvents()};j.init=!1;j.guid=0;j.prototype.createTip=function(){var a,b,c,d,e;d=f.perceivedBrightness(this.settings.backgroundColor)<this.settings.darkThreshold;a=f.brightenColor(this.settings.backgroundColor,this.settings.gradientBrighten);b=f.brightenColor(this.settings.backgroundColor,this.settings.borderBrighten);c=this.settings.textColor||f.brightenColor(f.mixColor(d?"#fff":"#000",this.settings.backgroundColor,1),0.25*(d?1:-0.25));d=!this.settings.textShadow?
"rgba(0,0,0,0)":d?"rgba(0,0,0,0.5)":"rgba(255,255,255,0.5)";e=k.createElement("div");e.innerHTML='<div class="uTip" id="uTip'+ ++this.constructor.guid+'"></div>';f.prependStyle("#uTip"+this.constructor.guid+"{\npadding:"+this.settings.padding+";\nmax-width:"+this.settings.maxWidth+";\nbackground:"+a+";\nbackground:-webkit-linear-gradient("+this.settings.backgroundColor+","+a+");\nbackground:-moz-linear-gradient("+this.settings.backgroundColor+","+a+");\nbackground:linear-gradient("+this.settings.backgroundColor+
","+a+");\nfilter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#"+f.extendHex(this.settings.backgroundColor.replace("#",""))+"',endColorstr='#"+f.extendHex(a.replace("#",""))+"',GradientType=0);\nborder:1px solid "+b+";\ncolor:"+c+";\ntext-shadow:1px 1px "+d+";\n-webkit-transition:visibility 0s linear "+this.settings.transitionTime+",opacity "+this.settings.transitionTime+" linear;\n-moz-transition:visibility 0s linear "+this.settings.transitionTime+",opacity "+this.settings.transitionTime+
" linear;\ntransition:visibility 0s linear "+this.settings.transitionTime+",opacity "+this.settings.transitionTime+" linear\n}\n#uTip"+this.constructor.guid+".on{\nvisibility:visible;\nopacity:1;\n-webkit-transition-delay:"+this.settings.transitionDelay+";\n-moz-transition-delay:"+this.settings.transitionDelay+";\ntransition-delay:"+this.settings.transitionDelay+"\n}\n#uTip"+this.constructor.guid+":after{\nborder-top:8px solid "+a+"\n}\n#uTip"+this.constructor.guid+":before{\nborder-top:8px solid "+
b+"\n}");this.tip=e.firstChild;return k.body.appendChild(this.tip)};j.prototype.bindEvents=function(){var a,b,c,d,e=this;d=this.elements;b=0;for(c=d.length;b<c;b++)a=d[b],f.on(a,"mouseover",function(a){var b;b=a.target||a.srcElement;e.tip.className+=" on";e.tip.innerHTML=e.settings.text(a);a=b.offsetLeft+b.offsetWidth/2-e.tip.offsetWidth/2;0>a&&(a=0);b=b.offsetTop-e.tip.offsetHeight-8;0>b&&(b=0);e.tip.style.left=""+a+"px";return e.tip.style.top=""+b+"px"}),f.on(a,"mouseout",function(){return e.tip.className=
e.tip.className.replace(/\s+on/,"")});return!0};null==l.uTip&&(l.uTip=j);null!=h&&(h.fn.uTip=function(a){return this.each(function(){if(!h(this).data("plugin_uTip"))return h(this).data("plugin_uTip",new j(this,a))})})}).call(this);